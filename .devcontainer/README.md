üê≥ Dev Container Setup
–ß—Ç–æ —ç—Ç–æ?

Dev Container –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –≤–Ω—É—Ç—Ä–∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–æ –≤—Å–µ–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏:

    ‚úÖ Node.js 20
    ‚úÖ TypeScript, ESLint, Prettier
    ‚úÖ Docker-in-Docker (–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏)
    ‚úÖ Whisper –∏ OCR —Å–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ —Å–µ—Ç–∏
    ‚úÖ VS Code —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ VS Code

Name: Dev Containers
Id: ms-vscode-remote.remote-containers

2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

–°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é –ø–∞–ª–∏—Ç—Ä—É

    Ctrl+Shift+P (–∏–ª–∏ Cmd+Shift+P –Ω–∞ Mac)
    –í—ã–±–µ—Ä–∏—Ç–µ Dev Containers: Reopen in Container
    –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–±–æ—Ä–∫–∏ (–ø–µ—Ä–≤—ã–π —Ä–∞–∑ –∑–∞–π–º–µ—Ç 3-5 –º–∏–Ω—É—Ç)

–°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

    VS Code –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
    –ù–∞–∂–º–∏—Ç–µ "Reopen in Container"

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

–ü–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:
bash

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Node.js
node --version  # v20.x.x

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ TypeScript
tsc --version   # 5.3.3

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤
curl http://whisper:8000/health
curl http://ocr:9001/health

–†–∞–±–æ—Ç–∞ –≤ Dev Container
–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –±–æ—Ç–∞
bash

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
cd /workspace/bot
npm install

# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å hot reload
npm run dev

# –°–±–æ—Ä–∫–∞
npm run build

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
npm run format

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–æ–º
npm run lint

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏
bash

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose ps

# –õ–æ–≥–∏
docker compose logs -f whisper
docker compose logs -f ocr

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
docker compose restart whisper

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

–í–∞—à –ø—Ä–æ–µ–∫—Ç –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ /workspace:

/workspace/
‚îú‚îÄ‚îÄ bot/          ‚Üí Telegram –±–æ—Ç
‚îú‚îÄ‚îÄ whisper/      ‚Üí Whisper —Å–µ—Ä–≤–∏—Å
‚îú‚îÄ‚îÄ ocr/          ‚Üí OCR —Å–µ—Ä–≤–∏—Å
‚îî‚îÄ‚îÄ .devcontainer/ ‚Üí –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Dev Container

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ VS Code
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

    ESLint - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –Ω–∞ –æ—à–∏–±–∫–∏
    Prettier - –∞–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    Python - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Whisper/OCR
    Docker - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
    YAML - –ø–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

–ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏

–£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ! –ü—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Ñ–∞–π–ª (Ctrl+S).
–¢–µ—Ä–º–∏–Ω–∞–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

Bash (/bin/bash) - –¥–ª—è —É–¥–æ–±–Ω–æ–π —Ä–∞–±–æ—Ç—ã.
–ü–æ—Ä—Ç—ã

–°–µ—Ä–≤–∏—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ —Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ—Ä—Ç–∞—Ö:

–°–µ—Ä–≤–∏—Å	–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∞–¥—Ä–µ—Å	–í–Ω–µ—à–Ω–∏–π –∞–¥—Ä–µ—Å
Whisper	http://whisper:8000	http://localhost:8000
OCR	http://ocr:9001	http://localhost:9001

–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∞–¥—Ä–µ—Å–∞.
–° —Ö–æ—Å—Ç–∞ (–≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞) –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ localhost.
–û—Ç–ª–∞–¥–∫–∞
–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ –æ—Ç–ª–∞–¥–∫–∏

VS Code –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ TypeScript.

    –ü–æ—Å—Ç–∞–≤—å—Ç–µ breakpoint –≤ –∫–æ–¥–µ (–∫–ª–∏–∫–Ω–∏—Ç–µ —Å–ª–µ–≤–∞ –æ—Ç –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–æ–∫–∏)
    F5 –∏–ª–∏ Run ‚Üí Start Debugging
    –í—ã–±–µ—Ä–∏—Ç–µ Node.js –µ—Å–ª–∏ —Å–ø—Ä–æ—Å–∏—Ç

–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
bash

# –í –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–∞–ª–∞—Ö
docker compose logs -f whisper
docker compose logs -f ocr
docker compose logs -f bot

–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
bash

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose -f docker-compose.dev.yml down
docker compose -f docker-compose.dev.yml build --no-cache
docker compose -f docker-compose.dev.yml up -d

–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
bash

# –î–ª—è –±–æ—Ç–∞: –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ npm run dev
# –î–ª—è Whisper/OCR: –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose restart whisper

node_modules –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –í Dev Container –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π volume –¥–ª—è node_modules:
yaml

volumes:
  - node_modules:/workspace/bot/node_modules

–≠—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É –∏ –∏–∑–±–µ–≥–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É —Ö–æ—Å—Ç–æ–º –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º.
–ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ Docker

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker –∑–∞–ø—É—â–µ–Ω –Ω–∞ —Ö–æ—Å—Ç–µ:
bash

# –ù–∞ —Ö–æ—Å—Ç–µ (–Ω–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)
docker ps

–í—ã—Ö–æ–¥ –∏–∑ Dev Container

    Ctrl+Shift+P
    Dev Containers: Reopen Folder Locally

–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–∫—Ä–æ–π—Ç–µ VS Code.
–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
bash

# –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd /workspace/bot
npm update

# –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ
docker compose down -v

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
docker compose up -d --build

# –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Whisper
docker compose exec whisper bash

# –ó–∞–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä OCR
docker compose exec ocr bash

Production deployment

Dev Container –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ production. –î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–¥–∞–∫—à–Ω –≤–µ—Ä—Å–∏–∏:
bash

# –ù–∞ —Ö–æ—Å—Ç–µ
make build
make up
make logs

Dev Container –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

–°–æ–≤–µ—Ç: –î–æ–±–∞–≤—å—Ç–µ –ø–∞–ø–∫—É .devcontainer/ –≤ git, —á—Ç–æ–±—ã –≤—Å—è –∫–æ–º–∞–Ω–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ! üöÄ
